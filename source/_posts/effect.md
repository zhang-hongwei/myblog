---
title: Effect
date: 2023-01-01 15:54:25
tags: React
---

- ä¸Žäº‹ä»¶ä¸åŒï¼ŒEffect æ˜¯ç”±æ¸²æŸ“æœ¬èº«ï¼Œè€Œéžç‰¹å®šäº¤äº’å¼•èµ·çš„ã€‚
- Effect å…è®¸ä½ å°†ç»„ä»¶ä¸ŽæŸäº›å¤–éƒ¨ç³»ç»Ÿï¼ˆç¬¬ä¸‰æ–¹ APIã€ç½‘ç»œç­‰ï¼‰åŒæ­¥ã€‚
- é»˜è®¤æƒ…å†µä¸‹ï¼ŒEffect åœ¨æ¯æ¬¡æ¸²æŸ“ï¼ˆåŒ…æ‹¬åˆå§‹æ¸²æŸ“ï¼‰åŽè¿è¡Œã€‚
- å¦‚æžœ React çš„æ‰€æœ‰ä¾èµ–é¡¹éƒ½ä¸Žä¸Šæ¬¡æ¸²æŸ“æ—¶çš„å€¼ç›¸åŒï¼Œåˆ™å°†è·³è¿‡æœ¬æ¬¡ Effectã€‚
- ä¸èƒ½éšæ„é€‰æ‹©ä¾èµ–é¡¹ï¼Œå®ƒä»¬æ˜¯ç”± Effect å†…éƒ¨çš„ä»£ç å†³å®šçš„ã€‚
- ç©ºçš„ä¾èµ–æ•°ç»„ï¼ˆ`[]`ï¼‰å¯¹åº”äºŽç»„ä»¶â€œæŒ‚è½½â€ï¼Œå³æ·»åŠ åˆ°å±å¹•ä¸Šã€‚
- ä»…åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹çš„å¼€å‘çŽ¯å¢ƒä¸­ï¼ŒReact ä¼šæŒ‚è½½ä¸¤æ¬¡ç»„ä»¶ï¼Œä»¥å¯¹ Effect è¿›è¡ŒåŽ‹åŠ›æµ‹è¯•ã€‚
- å¦‚æžœ Effect å› ä¸ºé‡æ–°æŒ‚è½½è€Œä¸­æ–­ï¼Œé‚£ä¹ˆéœ€è¦å®žçŽ°ä¸€ä¸ªæ¸…ç†å‡½æ•°ã€‚
- React å°†åœ¨ä¸‹æ¬¡ Effect è¿è¡Œä¹‹å‰ä»¥åŠå¸è½½æœŸé—´è¿™ä¸¤ä¸ªæ—¶å€™è°ƒç”¨æ¸…ç†å‡½æ•°ã€‚

## Effect åœ¨ç»„ä»¶æŒ‚è½½æ—¶è¿è¡Œäº†ä¸¤æ¬¡

åœ¨å¼€å‘çŽ¯å¢ƒä¸‹ï¼Œå¦‚æžœå¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼ŒReact ä¼šåœ¨å®žé™…è¿è¡Œ setup ä¹‹å‰é¢å¤–è¿è¡Œä¸€æ¬¡ setup å’Œ cleanupã€‚

è¿™æ˜¯ä¸€ä¸ªåŽ‹åŠ›æµ‹è¯•ï¼Œç”¨äºŽéªŒè¯ Effect çš„é€»è¾‘æ˜¯å¦æ­£ç¡®å®žçŽ°ã€‚å¦‚æžœå‡ºçŽ°å¯è§é—®é¢˜ï¼Œåˆ™ cleanup å‡½æ•°ç¼ºå°‘æŸäº›é€»è¾‘ã€‚cleanup å‡½æ•°åº”è¯¥åœæ­¢æˆ–æ’¤æ¶ˆ setup å‡½æ•°æ‰€åšçš„ä»»ä½•æ“ä½œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·ä¸åº”è¯¥èƒ½å¤ŸåŒºåˆ† setup è¢«è°ƒç”¨ä¸€æ¬¡ï¼ˆå¦‚åœ¨ç”Ÿäº§çŽ¯å¢ƒä¸­ï¼‰å’Œè°ƒç”¨ setup â†’ cleanup â†’ setup åºåˆ—ï¼ˆå¦‚åœ¨å¼€å‘çŽ¯å¢ƒä¸­ï¼‰ã€‚


### Effect åœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“åŽéƒ½è¿è¡Œ

é¦–å…ˆï¼Œè¯·æ£€æŸ¥æ˜¯å¦å¿˜è®°æŒ‡å®šä¾èµ–é¡¹æ•°ç»„ï¼š

```
useEffect(() => {
  // ...
}); // ðŸš© æ²¡æœ‰ä¾èµ–é¡¹æ•°ç»„ï¼šæ¯æ¬¡é‡æ–°æ¸²æŸ“åŽé‡æ–°è¿è¡Œï¼
```

å¦‚æžœä½ å·²ç»æŒ‡å®šäº†ä¾èµ–é¡¹æ•°ç»„ï¼Œä½ çš„ Effect ä»å¾ªçŽ¯åœ°é‡æ–°è¿è¡Œï¼Œé‚£æ˜¯å› ä¸ºä½ çš„æŸä¸ªä¾èµ–é¡¹åœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶éƒ½æ˜¯ä¸åŒçš„ã€‚

ä½ å¯ä»¥é€šè¿‡æ‰‹åŠ¨æ‰“å°ä¾èµ–é¡¹åˆ°æŽ§åˆ¶å°æ¥è°ƒè¯•æ­¤é—®é¢˜ï¼š

```
  useEffect(() => {
    // ..
  }, [serverUrl, roomId]);

  console.log([serverUrl, roomId]);
```
