---
title: 为什么字体文件不添加crossorigin，有可能不会命中缓存
date: 2020-07-03 21:00:00
tags: 跨域
---

您提到的情况是因为浏览器在处理字体文件时，特别是在使用 **`@font-face`** CSS 规则加载字体文件时，存在跨域请求的一些细节。在某些情况下，如果未正确设置 **`crossorigin`** 属性，可能导致浏览器不会将字体文件缓存，从而影响性能。

字体文件在加载时可能会产生跨域请求，特别是在以下情况下：

1. **字体文件托管在不同的域名下：** 如果您的网站托管在一个域名上，而字体文件托管在另一个域名上，浏览器会认为这是跨域请求。这是由于同源策略的限制。
2. **字体文件包含了元数据信息：** 一些字体文件可能包含了元数据信息，如版权信息等。当字体文件包含这些元数据时，浏览器会视其为带有身份信息的资源，可能会对其进行跨域请求。

为了确保字体文件正确缓存，通常建议在 **`@font-face`** CSS 规则中设置 **`crossorigin`** 属性，将其值设置为 **`"anonymous"`**，即使字体文件托管在不同的域名下。这会告诉浏览器字体文件是匿名的，不包含用户身份信息，可以缓存。

以下是一个示例：

```css

@font-face {
  font-family: 'MyFont';
  src: url('https://example.com/myfont.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
  crossorigin: anonymous; /* 设置 crossorigin 属性 */
}
```

通过设置 **`crossorigin: anonymous`**，您可以确保浏览器正确缓存字体文件，以提高页面加载性能，并避免字体文件在每次请求时都产生跨域请求。