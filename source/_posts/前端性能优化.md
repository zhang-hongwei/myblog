---
title: 前端性能优化
date: 2023-07-22 22:10:00
tags: 性能优化
---

## 资源请求阶段

1. **减少HTTP请求数量**：
    - 合并多个CSS和JavaScript文件，以减少请求次数。
    - 使用图像精灵表将多个小图标合并成一个图像文件。
    - 考虑使用CSS和JavaScript的内联方式，减少额外的外部请求。
2. **使用浏览器缓存**：
    - 设置适当的缓存策略，包括浏览器缓存、CDN缓存和代理服务器缓存。
    - 使用版本控制或哈希命名文件，以确保新版本的资源被正确加载，同时又能从缓存中获取旧版本。
3. **启用GZIP压缩**：
    - 配置服务器以启用GZIP或Brotli压缩，以减小传输的文件大小。
4. **使用CDN（内容分发网络）**：
    - 将静态资源分发到CDN节点，以减少资源加载的延迟时间。
    - 使用CDN来减轻服务器负担，特别是对于图片、CSS和JavaScript文件。
5. **异步加载非关键资源**：
    - 延迟加载页面底部的非关键资源，如底部的JavaScript、图片和广告，以确保首屏加载速度更快。
6. **资源预加载和预获取**：
    - 使用**`<link rel="preload">`**来指示浏览器预加载关键资源，以提前准备好页面。
    - 使用**`<link rel="prefetch">`**来预获取潜在需要的资源，以提高用户导航速度。
7. **使用适当的图像格式**：
    - 使用现代图像格式，如WebP，以减小图像文件的大小。
    - 根据不同设备和分辨率提供多个图像版本，以适应不同的显示屏。
8. **字体优化**：
    - 最小化使用自定义字体，以减小字体文件的大小。
    - 使用字体子集（Subsetting）来仅包含所需的字符，以减小字体文件大小。
9. **延迟加载（Lazy Loading）**：
    - 延迟加载页面中不可见区域的图片，以减小首屏加载时间。
    - 使用**`loading="lazy"`**属性来实现图片延迟加载。
10. **预渲染关键页面**：
    - 对于关键页面，使用**`<link rel="prerender">`**来提示浏览器预渲染页面，以提高导航速度。
11. **移除不必要的第三方插件**：
    - 评估和删除不必要的第三方插件或库，以减少额外的HTTP请求和资源加载。
12. **使用HTTP/2或HTTP/3**：
    - 配置服务器以支持HTTP/2或HTTP/3协议，以提高资源并行加载能力。
13. **资源分段加载**：
    - 使用分段加载技术，如懒加载或无限滚动，以减小初始加载时的资源需求。

## 渲染优化

渲染阶段是网页加载和呈现内容的关键部分，因此性能优化在这一阶段尤为重要。以下是一些渲染阶段性能优化的方法：

1. **优化关键路径渲染**：
    - 确保关键资源（HTML、CSS、JavaScript）以及关键渲染树（above-the-fold内容）能够尽早下载和处理，以加快首屏渲染速度。
2. **减少重绘和回流**：
    - 避免不必要的DOM操作和样式更改，以减少浏览器的重绘（Repaint）和回流（Reflow）操作。
    - 使用**`transform`**和**`opacity`**等属性来执行动画，因为它们通常不会触发回流。
3. **利用CSS硬件加速**：
    - 使用**`transform`**和**`opacity`**等属性来触发GPU硬件加速，以提高动画和滚动性能。
4. **异步加载和执行JavaScript**：
    - 使用**`async`**或**`defer`**属性来加载JavaScript文件，以防止脚本的阻塞渲染。
    - 将JavaScript文件放在页面底部，以减小对首屏渲染的影响。
5. **延迟加载非关键资源**：
    - 延迟加载页面底部的非关键资源，如底部的JavaScript、图片和广告，以确保首屏渲染尽快完成。
6. **图片优化**：
    - 使用适当的图片格式（如WebP）和压缩，以减小图像文件的大小。
    - 使用响应式图片，根据不同设备和屏幕大小加载适当的图像版本。
7. **字体优化**：
    - 最小化使用自定义字体，减小字体文件的大小。
    - 使用字体预加载或**`font-display`**属性来优化字体加载。
8. **利用浏览器缓存**：
    - 设置适当的缓存策略，以减少不必要的资源请求。
    - 使用CDN来提供缓存和资源分发。
9. **使用服务端渲染 (SSR) 或静态站点生成 (SSG)**：
    - 使用服务器端渲染或静态站点生成技术，以提前生成HTML，减少客户端渲染时间。
10. **性能监控和分析**：
    - 使用性能监控工具来跟踪和分析页面性能，识别瓶颈并采取措施改进。
11. **使用响应式设计**：
    - 使用媒体查询和弹性布局来确保页面适应不同屏幕尺寸和设备。
12. **避免页面闪烁**：
    - 使用样式表的预加载和媒体查询来避免页面在加载时出现明显的变化。
13. **利用缓存策略**：
    - 使用合适的缓存策略，如浏览器缓存、Service Workers 和HTTP缓存控制头，以减少资源请求次数。
14. **优化字体加载**：
    - 使用**`font-display`**属性来定义字体加载策略，以确保文本内容能够快速显示。
